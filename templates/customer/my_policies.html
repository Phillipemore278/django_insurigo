{% extends './base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-md-10">
        <div class="card">
            <div class="card-body">
                <h2>My Insurance Policies</h2>

                <!-- Car Policies -->
                <h3>Car Insurance</h3>
                {% if car_policies %}
                    <ul>
                    {% for policy in car_policies %}
                        <li>
                            <strong>{{ policy.vehicle.make }} {{ policy.vehicle.model }}</strong><br>
                            Policy #: {{ policy.policy_number }} | Premium: ${{ policy.premium_amount }} | Active: {{ policy.is_active }}
                            <br><a href="{% url 'customer:policy_detail' 'car' policy.id %}">View Policy</a>
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <p>No car insurance policies found.</p>
                {% endif %}

                <!-- Health Policies -->
                <h3>Health Insurance</h3>
                {% if health_policies %}
                    <ul>
                    {% for policy in health_policies %}
                        <li>
                            <strong>Plan: {{ policy.get_plan_type_display }}</strong><br>
                            Policy #: {{ policy.policy_number }} | Premium: ${{ policy.premium_amount }} | Active: {{ policy.is_active }}
                            <br><a href="{% url 'customer:policy_detail' 'health' policy.id %}">View Policy</a>
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <p>No health insurance policies found.</p>
                {% endif %}

            </div>
        </div>
    </div>
</div>
{% endblock %}